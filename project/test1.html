<!DOCTYPE html>
<html lang="en">
    <head>
        <meta charset="UTF-8">
        <meta name="viewport" content="width=device-width, initial-scale=1.0">
        <title>Latest Movie Reviews</title>
    </head>
    <body>

        <h1>Latest Movie Reviews</h1>

        <div id="latestReviews"></div>

        <script>
            const movies = [
                { title: "Oppenheimer", releaseYear: "2023", genres: ["War", "Historical","Thriller"], rating: 3.5, reviewdate: "2023-12-15" },
                { title: "Mission: Impossible - Dead Reckoning Part One", releaseYear: "2023", genres: ["Action"], rating: 3.5, reviewdate: "2023-12-15"   },
                { title: "Spider-Man: Across the Spider-Verse", releaseYear: "2023", genres: ["Action", "Animation"], rating: 4, reviewdate: "2023-12-15"  },
                { title: "The Whale", releaseYear: "2022", genres: ["Drama"], rating: 3.5, reviewdate: "2023-12-15"  },
                { title: "Tar", releaseYear: "2022", genres: ["Drama"], rating: 3.5, reviewdate: "2023-12-15"  },
                { title: "Soul", releaseYear: "2020", genres: ["Animation","Comedy"], rating: 3.5, reviewdate: "2023-12-15"  },
                { title: "The Wailing", releaseYear: "2016", genres: ["Horror"], rating: 4, reviewdate: "2023-12-05"  },
                { title: "Nightcrawler", releaseYear: "2014", genres: ["Thriller"], rating: 4.5, reviewdate: "2023-12-15"  },
                { title: "Whiplash", releaseYear: "2014", genres: ["Drama","Thriller"], rating: 5, reviewdate: "2023-11-05"  },
                { title: "I Saw the Devil", releaseYear: "2010", genres: ["Thriller","Action"], rating: 5, reviewdate: "2023-11-05"  },
            ];

            // Sort movies by reviewdate in descending order
            movies.sort((a, b) => new Date(b.reviewdate) - new Date(a.reviewdate));

            // Get the three latest reviews
            const latestReviews = movies.slice(0, 3);

            // Display the three latest reviews on the HTML page
            const latestReviewsElement = document.getElementById('latestReviews');
            latestReviewsElement.innerHTML = '';

            latestReviews.forEach(review => {
                const imagePath = getImagePath(review.title, 'jpg');

                const reviewElement = document.createElement('div');
                reviewElement.innerHTML = `
                    <h2>${review.title}</h2>
                    <img src="${imagePath}" alt="${review.title}" onerror="this.onerror=null; this.src='${getImagePath(review.title, 'png')}';">
                    <p>Release Year: ${review.releaseYear}</p>
                    <p>Genres: ${review.genres.join(', ')}</p>
                    <p>Rating: ${review.rating}</p>
                    <p>Review Date: ${review.reviewdate}</p>
                    <hr>
                `;
                latestReviewsElement.appendChild(reviewElement);
            });

            // Function to generate the image path based on the movie title and file extension
            function getImagePath(title, extension) {
                const formattedTitle = title.toLowerCase().replace(/:/g, '-').replace(/ /g, '_');
                return `project_images/${formattedTitle}.${extension}`;
            }
        </script>
    </body>
</html>
